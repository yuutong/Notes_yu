# OpenCV | 实时道路车道检测

## 简介

自动驾驶汽车是人工智能中最具颠覆性的创新之一。通过深度学习算法，它们不断推动我们的社会向前发展，并在移动领域创造新的机会。训练自动驾驶汽车的许多步骤之一是车道检测，这是最初的步骤。本文将学习如何使用视频进行车道检测。

## 道路车道检测的步骤

车道检测算法通过分析视觉输入可靠地识别车道的位置和边界。先进的驾驶辅助系统（ADAS）和自动驾驶车辆系统都依赖于这些算法。我们将讨论其中一种车道检测算法，其步骤包括：

1. **捕获和解码视频文件**：
   - 我们将使用 `VideoFileClip` 对象捕获视频，并将每一帧解码（即转换为一系列图像）。

2. **图像的灰度转换**：
   - 视频帧为 RGB 格式，将 RGB 转换为灰度，因为处理单通道图像比处理三通道彩色图像更快。

3. **减少噪声**：
   - 噪声会产生错误边缘，因此在进一步处理之前，需要进行图像平滑。使用高斯模糊（Gaussian blur）来执行此过程。

4. **Canny 边缘检测**：
   - 在模糊图像的所有方向上计算梯度，并跟踪强度变化大的边缘。

5. **兴趣区域（ROI）**：
   - 只考虑道路覆盖的区域。创建一个与道路图像相同尺寸的掩码，并对 Canny 图像和掩码执行按位与操作。

6. **霍夫线变换（Hough Line Transform）**：
   - 使用霍夫变换（Hough Transform）提取图像中的基本几何对象（如线和圆）。我们将使用概率霍夫变换来解决计算复杂性问题。

7. **在图像或视频上绘制线条**：
   - 使用霍夫线变换识别车道线后，将它们叠加在视觉输入（视频流/图像）上。

## 数据集

为了演示此算法的工作原理，我们将使用一个道路视频文件。您可以从此 GitHub 链接下载数据集：[数据集](https://github.com/your-dataset-link)。

## 实现道路车道检测的步骤

### 第一步：安装 OpenCV 库

```python
!pip install -q opencv-python


pip install D:\Project\Python\moviepy-1.0.3\whl_file\numpy-1.26.4-pp39-pypy39_pp73-macosx_10_9_x86_64.whl
pip install D:\Project\Python\moviepy-1.0.3\whl_file\decorator-5.1.1-py3-none-any.whl
pip install D:\Project\Python\moviepy-1.0.3\whl_file\iimageio-2.34.1-py3-none-any.whl




pip install "D:\Project\Python\moviepy-1.0.3\whl_file\numpy-1.24.4-cp38-cp38-win_amd64.whl"
pip install "D:\Project\Python\moviepy-1.0.3\whl_file\decorator-5.1.1-py3-none-any.whl"
pip install "D:\Project\Python\moviepy-1.0.3\whl_file\imageio-2.22.2-py3-none-any.whl"
pip install "D:\Project\Python\moviepy-1.0.3\whl_file\imageio_ffmpeg-0.5.0-py3-none-win_amd64.whl"
pip install "D:\Project\Python\moviepy-1.0.3\whl_file\moviepy-1.0.3-py3-none-any.whl"