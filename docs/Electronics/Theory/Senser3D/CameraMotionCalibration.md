
> 标定后不变的参数

在经过了相机的内参和畸变系数标定，以及激光器和相机的激光平面标定之后，只要相机和激光器不动，相机的参数以及光平面参数就无需改变。但会导致激光条纹始终在同一个位置，因此如何将当前帧的三维信息移动到上一帧的合适位置实现多帧图像的重组

> 多帧重建的前提

两帧点云之间是有相对位置关系的，并不只是简单的加上一个固定间隔，需要具体的位置和方向，由于载物台是平的，移动平台是匀速运动。运动平台带着固定好的相机和激光器匀速运动，相机每隔一段时间拍一次照片，对应重建后的图像帧之间的距离，**重点在于**：当平台前进一段已知的物理距离 Δs 时，在相机坐标系下，对应的平移向量是什么。这个过程就是对匀速运动的相机做标定。

## 相机运动标定

### 1.具体操作：

* a.固定好相机和激光器<br>
利用一维移动平台进行扫描，过程中相机和激光器固定不动，移动平台带着标定板匀速直线运动。

* b.拍两张棋盘格图<br>
控制运动平台运动10mm，并在开始位置和结束位置各拍摄一张标定板的图像

* c.提取角点对应的三维坐标<br>
对两张棋盘格标定板的图像 提取棋盘格角点。 再运用相机的畸变系数和内参矩阵，以及外参矩阵，将图上的所有角点都映射到相机坐标系下的三维坐标。

### 2.数学推理

#### 1. 角点三维坐标提取

假设在相机坐标系下，第 1 张标定图像中第 @i@ 个棋盘格角点的三维坐标为

@@
\mathbf P_i^{(1)} = \bigl(X_i^{(1)},\,Y_i^{(1)},\,Z_i^{(1)}\bigr)^T,
@@

第 2 张图像中的同一角点为

@@
\mathbf P_i^{(2)} = \bigl(X_i^{(2)},\,Y_i^{(2)},\,Z_i^{(2)}\bigr)^T.
@@

---

#### 2. 原始运动向量的计算

对所有 @N@ 对角点，先求差向量并取平均，得到原始平台移动向量 @\mathbf m_{\mathrm{raw}}@：

@@
\mathbf m_{\mathrm{raw}}
= \frac{1}{N}\sum_{i=1}^{N}\Bigl(\mathbf P_i^{(2)} - \mathbf P_i^{(1)}\Bigr)
= \begin{bmatrix}
\frac{1}{N}\sum_i \bigl(X_i^{(2)} - X_i^{(1)}\bigr) \\
\frac{1}{N}\sum_i \bigl(Y_i^{(2)} - Y_i^{(1)}\bigr) \\
\frac{1}{N}\sum_i \bigl(Z_i^{(2)} - Z_i^{(1)}\bigr)
\end{bmatrix}.
@@

---

#### 3. 单位方向向量归一化

计算 @\mathbf m_{\mathrm{raw}}@ 的欧氏范数：

@@
\|\mathbf m_{\mathrm{raw}}\|
= \sqrt{\,\bigl(m_x\bigr)^2 + \bigl(m_y\bigr)^2 + \bigl(m_z\bigr)^2\,}.
@@

将其归一化，得到方向向量

@@
\mathbf m_{\mathrm{unit}}
= \frac{\mathbf m_{\mathrm{raw}}}{\|\mathbf m_{\mathrm{raw}}\|},
\quad
\|\mathbf m_{\mathrm{unit}}\| = 1.
@@

---

#### 4. 知晓物理移动距离的尺度标定

在标定实验中，你让平台沿该方向实际前进已知物理距离 @\Delta s_{\text{calib}}@。此时可计算标度因子 @s@：

@@
s = \frac{\Delta s_{\text{calib}}}{\|\mathbf m_{\mathrm{raw}}\|}.
@@

于是，**真实的**相机坐标系下平台移动向量为

@@
\Delta \mathbf P = s \,\mathbf m_{\mathrm{raw}}
= \Delta s_{\text{calib}}\;\mathbf m_{\mathrm{unit}}.
@@

---

#### 5. 多帧图像间的平移

若平台以匀速运动，每隔时间 @\Delta t@ 采一帧，则每帧对应的物理位移

@@
\Delta s = v\,\Delta t,
@@

其在相机坐标系下的平移向量仍为

@@
\Delta \mathbf P = \Delta s\;\mathbf m_{\mathrm{unit}}.
@@

---

#### 6. 多帧点云拼接

令第 @n@ 帧重建的第 @j@ 个点在相机坐标系下为 @\mathbf P^{(n)}_{j}@，则将所有帧对齐到初始位置时，每帧点云需要向负运动方向平移

@@
\mathbf P^{(n)}_{j,\mathrm{aligned}}
= \mathbf P^{(n)}_{j}
- (n-1)\,\Delta s\;\mathbf m_{\mathrm{unit}},
@@

这样，所有 @\{\mathbf P^{(n)}_{j,\mathrm{aligned}}\}@ 可直接合并，得到完整的三维模型。

